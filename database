CREATE DATABASE Shopping_Cart;

USE Shopping_Cart;






CREATE TABLE categories(
id TINYINT AUTO_INCREMENT PRIMARY KEY ,
name VARCHAR(100) NOT NULL 
)ENGINE=INNODB;

CREATE TABLE customers(
id INT AUTO_INCREMENT PRIMARY KEY ,
forname VARCHAR( 50) NOT NULL ,
surname VARCHAR(50) NOT NULL ,
addOne VARCHAR(50) NOT NULL,
addTwo VARCHAR(50) NOT NULL, 
postcode VARCHAR(10) NOT NULL, 
phone VARCHAR(20) NOT NULL ,
email VARCHAR( 150 ) NOT NULL , 
registered TINYINT NOT NULL 
)ENGINE=INNODB;

CREATE TABLE logins(
id INT AUTO_INCREMENT PRIMARY KEY ,
customerID INT NOT NULL ,
username VARCHAR(100) NOT NULL , 
password VARCHAR(100 ) NOT NULL , 
)ENGINE=INNODB;

ALTER TABLE logins 
ADD CONSTRAINT fk_customer
FOREIGN KEY( customerID )
REFERENCES customers( id ) 
ON DELETE CASCADE 
ON UPDATE CASCADE 

CREATE TABLE orderItems(
id INT AUTO_INCREMENT PRIMARY KEY ,
quantity INT NOT NULL , 
productID INT NOT NULL , 
orderID INT NOT NULL , 
)ENGINE=INNODB;


CREATE TABLE orders(
id INT AUTO_INCREMENT PRIMARY KEY ,
paymentMethod VARCHAR(50) NULL , 
date TIMESTAMP 
total FLOAT 
)ENGINE=INNODB;

CREATE TABLE products(
id INT AUTO_INCREMENT PRIMARY KEY ,
name VARCHAR(150) NOT NULL , 
description TEXT NOT NULL , 
price FLOAT NOT NULL , 
categoryID TINYINT NOT NULL , 
image TEXT 
)ENGINE=INNODB;

ALTER TABLE products
ADD CONSTRAINT fk_category 
FOREIGN KEY( categoryID )
REFERENCES categories( id )
ON DELETE CASCADE 
ON UPDATE CASCADE;


ALTER TABLE orderItems
ADD CONSTRAINT fk_product
FOREIGN KEY( productID )
REFERENCES products( id )
ON DELETE CASCADE 
ON UPDATE CASCADE; 


ALTER TABLE orderItems 
ADD CONSTRAINT fk_order 
FOREIGN KEY( orderID )
REFERENCES orders( id )
ON DELETE CASCADE 
ON UPDATE CASCADE ;

